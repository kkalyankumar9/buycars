import React, { useEffect, useState } from "react";
import axios from "axios";

const CarsPages = () => {
  const [cars, setCars] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const fetchCars = async () => {
    try {
      const response = await axios.get("https://buycars-tjn7.onrender.com/dealer_crud/get");
      setCars(response.data); // Assuming API returns an array of car objects
      setLoading(false);
    } catch (err) {
      console.error(err);
      setError("Failed to fetch cars. Please try again later.");
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchCars();
  }, []);

  if (loading) return <div>Loading...</div>;
  if (error) return <div>{error}</div>;

  return (
    <div className="p-4">
      <h1 className="text-2xl font-bold mb-4">Car Inventory</h1>
      <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {cars.map((car) => (
          <div
            key={car._id}
            className="border p-4 rounded-lg shadow hover:shadow-lg transition"
          >
            <img
              src={"data:image/jpeg;base64,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"}
              alt={car.title}
              className="w-full h-40 object-cover rounded-md mb-4"
            />
            <h2 className="text-xl font-semibold">{car.title}</h2>
            <p className="text-gray-600">Price: â‚¹{car.price}</p>
            <p className="text-gray-600">Mileage: {car.mileage} km/l</p>
            <p className="text-gray-600">Color: {car.color}</p>
            <p className="text-gray-600">Kms Driven: {car.kmsDriven} km</p>
            <p className="text-gray-600">Accidents Reported: {car.accidentsReported}</p>
            <p className="text-gray-600">Registration Place: {car.registrationPlace}</p>
          </div>
        ))}
      </div>
    </div>
  );
};

export default CarsPages;
